<!DOCTYPE html>
<html lang="ku">
<head>
<meta charset="UTF-8">
<title>Dashboard | KurdKod Admin</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Noto Sans Arabic',sans-serif;background:#f8fafc;direction:rtl;margin:0;color:#1f2937;}
header{background:#2563eb;color:white;padding:35px;text-align:center;}
section{max-width:900px;margin:30px auto;background:white;padding:25px;border-radius:14px;box-shadow:0 0 15px rgba(0,0,0,0.05);}
h2{border-right:5px solid #2563eb;padding-right:10px;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #cbd5e1;padding:8px;text-align:right;}
th{background:#eff6ff;}
footer{text-align:center;font-size:14px;margin:40px 0;color:#555;}
</style>
</head>
<body>
<header>
<h1>KurdKod Admin Dashboard</h1>
<p>Ù‡Û•Ù…ÙˆÙˆ Ø¨ÛŒØ±Û†Ú©Û•Ú©Ø§Ù†Øª Ù„Û•ÙˆÛŽ Ø¯Û•Ø¨ÛŒÙ†ÛŒØª</p>
</header>

<section>
<h2>ðŸ“‹ Ù„ÛŒØ³ØªÛŒ Ø¨ÛŒØ±Û†Ú©Û•Ú©Ø§Ù†</h2>
<table>
<tr><th>Ù†Ø§Ùˆ</th><th>Ø¬Û†Ø±</th><th>Ú•ÙˆÙˆÙ†Ú©Ø±Ø¯Ù†Û•ÙˆÛ•</th></tr>
<tbody id="ideas"></tbody>
</table>
</section>

<footer>Â© KurdKod â€“ Ù‡Ø§ÙˆØ¨Û•Ø´ÛŒ Ú¯Û•Ù†Ø¬Ø§Ù†</footer>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabaseUrl = "https://jghcjxlwiizprsmuvnoz.supabase.co";
const supabaseKey = "sb_publishable_a_xw7b8TnitjSB6MCOC3Pg_T0NB15bO";
const supabase = Supabase.createClient(supabaseUrl, supabaseKey);

supabase.auth.onAuthStateChange((event, session) => {
  if(!session) window.location.href = "login.html";
});

async function loadIdeas() {
  let { data } = await supabase.from('ideas').select('*');
  const tbody = document.getElementById('ideas');
  tbody.innerHTML = '';
  data.forEach(item => {
    tbody.innerHTML += `<tr><td>${item.name}</td><td>${item.type}</td><td>${item.message}</td></tr>`;
  });
}
loadIdeas();
</script>
</body>
</html>
